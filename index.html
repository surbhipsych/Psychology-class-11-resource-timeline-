<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>üåü Cute Psychology Timeline</title>
<style>
:root {
  --bg: #0f0f0f;
  --text: #ffffff;
  --accent: #39f0fc;
  --card-bg: #1b1b1b;
  --drop-bg: #fce4ec;
}
body.light {
  --bg: #f9f9f9;
  --text: #000;
  --accent: #39f0fc;
  --card-bg: #ffffff;
}
body {
  background: var(--bg);
  color: var(--text);
  font-family: 'Segoe UI', sans-serif;
  margin: 0;
  padding: 20px;
  transition: background 0.3s, color 0.3s;
}
h1 {
  text-align: center;
  color: var(--accent);
  text-shadow: 0 0 12px var(--accent);
}
textarea {
  width: 100%;
  height: 150px;
  background: var(--card-bg);
  color: var(--text);
  border: 2px solid var(--accent);
  border-radius: 10px;
  padding: 10px;
  font-size: 16px;
  box-shadow: 0 0 10px var(--accent);
  margin-bottom: 15px;
}
button {
  margin: 5px;
  padding: 10px 20px;
  font-size: 15px;
  border: none;
  border-radius: 20px;
  font-weight: bold;
  cursor: pointer;
  background: var(--accent);
  color: black;
  box-shadow: 0 0 10px var(--accent);
  transition: transform 0.2s ease;
}
button:hover {
  background: #87ffff;
  transform: scale(1.05);
  box-shadow: 0 0 15px #87ffff;
}
.container {
  display: flex;
  gap: 20px;
  flex-wrap: wrap;
  margin-top: 20px;
}
.timeline, .dragbox, .entries {
  flex: 1;
  min-width: 280px;
  max-width: 32%;
  max-height: 70vh;
  overflow-y: auto;
  padding: 10px;
  border-radius: 15px;
}
.timeline {
  border-left: 4px dashed var(--accent);
}
.dragbox {
  background: var(--card-bg);
  border: 2px dashed var(--accent);
}
.entries {
  background: var(--card-bg);
  border: 2px solid var(--accent);
}
.year-block {
  position: relative;
  margin: 15px 0;
  padding: 15px;
  border-radius: 15px;
  background: linear-gradient(135deg, rgba(57,240,252,0.2), rgba(0,255,255,0.15));
  box-shadow: 0 0 8px var(--accent);
}
.dropzone {
  margin-top: 8px;
  background: rgba(255,255,255,0.05);
  border: 2px dashed var(--text);
  min-height: 50px;
  padding: 10px;
  border-radius: 10px;
  font-size: 14px;
  color: var(--text);
}
.card {
  background: var(--accent);
  color: black;
  padding: 10px;
  margin: 10px 0;
  border-radius: 15px;
  cursor: grab;
  font-weight: bold;
  box-shadow: 0 0 10px var(--accent);
}
.card:hover {
  transform: scale(1.05);
}
.dropped {
  background: var(--drop-bg) !important;
  color: black !important;
  box-shadow: 0 0 12px var(--drop-bg);
  border-radius: 10px;
  font-weight: bold;
  padding: 8px;
  text-align: center;
}
.remove-btn {
  position: absolute;
  top: 5px;
  right: 10px;
  color: #ff8a80;
  font-size: 18px;
  cursor: pointer;
}
.bottom-controls {
  text-align: center;
  margin-top: 20px;
}
.score {
  display: none;
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: #ffffff;
  color: #000000;
  padding: 25px;
  border-radius: 20px;
  box-shadow: 0 0 20px var(--accent);
  text-align: center;
  z-index: 9999;
  font-size: 18px;
}
footer {
  text-align: center;
  margin-top: 40px;
  font-size: 14px;
  opacity: 0.6;
}
</style>
</head>
<body>
<h1>üåü Cute Psychology Timeline</h1>
<textarea id="inputData" style="display:none;">
1879 - Wilhelm Wundt establishes the first psychology laboratory in Leipzig, Germany.
1890 - William James publishes "Principles of Psychology".
1895 - Functionalism emerges as a system of psychology.
1900 - Sigmund Freud develops psychoanalysis.
1904 - Ivan Pavlov wins the Nobel Prize for research leading to principles of conditioned responses.
1905 - Alfred Binet and Th√©odore Simon develop the first intelligence test.
1912 - Gestalt psychology is founded in Germany.
1916 - First Psychology Department established at Calcutta University.
1922 - Psychology included in the Indian Science Congress Association.
1924 - Indian Psychological Association is founded.
1924 - John B. Watson publishes "Behaviourism", shaping the behaviourist movement.
1928 - N.N. Sengupta and Radhakamal Mukerjee publish the first textbook on Social Psychology.
1949 - Psychological Research Wing of the Defence Science Organisation of India is established.
1951 - Carl Rogers publishes "Client-Centred Therapy".
1953 - B.F. Skinner publishes "Science and Human Behaviour", reinforcing behaviourism.
1954 - Abraham Maslow publishes "Motivation and Personality".
1954 - Bureau of Psychology established in Allahabad.
1955 - National Institute of Mental Health and Neurosciences (NIMHANS) established in Bangalore.
1962 - Hospital for Mental Diseases established in Ranchi.
1973 - Konrad Lorenz and Niko Tinbergen win Nobel Prize for work on innate animal behaviours.
1978 - Herbert Simon wins Nobel Prize for work on decision-making.
1981 - David Hubel and Torsten Wiesel win Nobel Prize for research on vision in the brain.
1981 - Roger Sperry wins Nobel Prize for split-brain research.
1989 - National Academy of Psychology (NAOP) India is founded.
1997 - National Brain Research Centre (NBRC) established in Gurgaon, Haryana.
2002 - Daniel Kahneman wins Nobel Prize for research on decision-making under uncertainty.
2005 - Thomas Schelling wins Nobel Prize for applying game theory to conflict and cooperation.
</textarea>

<div style="text-align:center;">
  <button onclick="processData()">Load Timeline</button>
  <button onclick="toggleMode()">üåó Toggle Theme</button>
</div>

<div class="container">
  <div class="timeline" id="timeline"></div>
  <div class="dragbox" id="dragbox"></div>
  <div class="entries" id="entries"><strong>Your Entries:</strong></div>
</div>

<div class="bottom-controls">
  <button onclick="prevBatch()">‚¨Ö Back</button>
  <button onclick="nextBatch()">Next ‚û°</button>
  <button onclick="exportPDF()">üìÑ Export PDF</button>
  <button onclick="submitFinal()">‚úÖ Submit</button>
  <button onclick="clearAll()">üóë Clear All</button>
</div>

<div class="score" id="scoreBox"></div>

<footer>¬© Surbhi Sharma @surbhipsychtutor</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
let allData = [], currentBatchIndex = 0, correctAnswers = {}, matched = {}, totalCorrect = 0, userEntries = {};

function processData() {
  const input = document.getElementById('inputData').value.trim();
  const lines = input.split('\n').filter(line => line.includes('-'));
  allData = lines.map(line => {
    const [year, ...rest] = line.split('-');
    return { year: year.trim(), event: rest.join('-').trim() };
  });
  currentBatchIndex = 0;
  matched = {};
  totalCorrect = 0;
  userEntries = {};
  showBatch();
  updateEntries();
  document.getElementById('scoreBox').style.display = 'none';
}

function showBatch() {
  const timeline = document.getElementById('timeline');
  const dragbox = document.getElementById('dragbox');
  timeline.innerHTML = '';
  dragbox.innerHTML = '';
  correctAnswers = {};
  
  const batch = allData.slice(currentBatchIndex, currentBatchIndex + 20);

  batch.forEach((item, index) => {
    correctAnswers[item.event] = item.year;

    const yearDiv = document.createElement('div');
    yearDiv.classList.add('year-block');
    yearDiv.innerHTML = `
      <div><strong>${item.year}</strong></div>
      <div class="dropzone" data-year="${item.year}">${matched[item.event] ? `<div class='dropped'>‚úÖ ${item.event}</div>` : "Drop here"}</div>
      <span class="remove-btn" onclick="removeItem(${currentBatchIndex + index})">&times;</span>
    `;
    timeline.appendChild(yearDiv);

    if (!matched[item.event]) {
      const card = document.createElement('div');
      card.classList.add('card');
      card.textContent = item.event;
      card.dataset.event = item.event;
      card.setAttribute('draggable', true);
      card.addEventListener('dragstart', e => {
        e.dataTransfer.setData('text/plain', card.dataset.event);
      });
      dragbox.appendChild(card);
    }
  });
}

function nextBatch() {
  if (currentBatchIndex + 20 < allData.length) {
    currentBatchIndex += 20;
    showBatch();
  } else {
    alert("‚úÖ No more entries!");
  }
}

function prevBatch() {
  if (currentBatchIndex - 20 >= 0) {
    currentBatchIndex -= 20;
    showBatch();
  }
}

function removeItem(index) {
  allData.splice(index, 1);
  showBatch();
}

function toggleMode() {
  document.body.classList.toggle('light');
}

function submitFinal() {
  const totalEntries = allData.length;
  const box = document.getElementById('scoreBox');
  box.innerHTML = `üèÜ You did it!<br><br>üéØ Final Score: ${totalCorrect} out of ${totalEntries}.<br><br><button onclick="processData()">üîÑ Try Again</button>`;
  box.style.display = 'block';
  matched = {};
  userEntries = {};
  updateEntries();
}

function clearAll() {
  matched = {};
  userEntries = {};
  totalCorrect = 0;
  showBatch();
  updateEntries();
}

function updateEntries() {
  const entriesDiv = document.getElementById('entries');
  entriesDiv.innerHTML = "<strong>Your Entries:</strong><br>";
  for (let [event, year] of Object.entries(userEntries)) {
    entriesDiv.innerHTML += `‚úÖ ${year} - ${event}<br>`;
  }
}

async function exportPDF() {
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();
  doc.setFontSize(14);
  
  // watermark
  doc.setTextColor(200);
  doc.setFontSize(40);
  doc.text("Surbhi S @surbhipsychtutor", 50, 150, { angle: 45 });

  doc.setTextColor(0);
  doc.setFontSize(12);
  let y = 20;
  doc.text("Your Matched Entries:", 10, y);
  y += 10;

  for (let [event, year] of Object.entries(userEntries)) {
    if (y > 270) {
      doc.addPage();
      y = 20;
    }
    doc.text(`${year} - ${event}`, 10, y);
    y += 8;
  }

  doc.save("Your_Entries.pdf");
}

document.addEventListener('dragover', e => {
  if (e.target.classList.contains('dropzone')) e.preventDefault();
});

document.addEventListener('drop', e => {
  if (e.target.classList.contains('dropzone')) {
    e.preventDefault();
    const eventText = e.dataTransfer.getData('text/plain');
    const dropYear = e.target.dataset.year;
    const correctYear = correctAnswers[eventText];

    if (dropYear === correctYear && !matched[eventText]) {
      e.target.innerHTML = `<div class='dropped'>‚úÖ ${eventText}</div>`;
      matched[eventText] = true;
      userEntries[eventText] = dropYear;
      const card = [...document.querySelectorAll('.card')].find(c => c.textContent === eventText);
      if (card) card.remove();
      totalCorrect++;
      updateEntries();
    }
  }
});
</script>
</body>
</html>
